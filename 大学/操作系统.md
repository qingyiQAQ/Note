# 第1章 计算机系统概述

## 基本构成

处理器(CPU)
内存
输入/输出模块
系统总线

![image-20230919103419656](C:\Users\CC507\AppData\Roaming\Typora\typora-user-images\image-20230919103419656.png)

## 指令的执行

![image-20230919104211401](C:\Users\CC507\AppData\Roaming\Typora\typora-user-images\image-20230919104211401.png)

指令分为4类：
1.处理器-存储器
2.处理器-I/O
3.数据处理
4.控制

## 中断

分类：
程序中断：指令出错
时钟中断：处理器内部计时器产生，可以被执行
I/O中断：I/O控制器产生
硬件失效中断：断电

## ...

# 第2章 操作系统概述

## 操作系统的目标和功能

操作系统是**控制应用程序执行的程序**，是**应用程序和计算机硬件间的接口**。

目标：**方便**，**有效**，**扩展能力**

提供的服务：
1.程序开发
2.程序运行
3.I/O设备访问
4.文件访问控制
5.系统访问
6.错误检测和响应
7.记账：收集各种资源的利用率和统计数据

3种重要接口：
1.**指令系统体系结构(ISA)**：定义了计算机遵循的机器语言指令系统，该接口是硬件与软件的分界线。有用户级ISA和系统级ISA。
2.**应用程序二进制接口(ABI)**：定义了程序间二进制可移植性的标准，定义了操作系统的系统调用接口以及在系统中通过ISA能使用的硬件资源和服务。
3.**应用程序编程接口(API)**：运行应用程序访问系统的硬件和资源，由用户级ISA和高级语言库HLL调用提供。使应用软件更容易重新编译并移植到具有相同API的其他系统中。

作为资源管理器的操作系统：
1.操作系统与普通计算机软件的作用相同，即它是由处理器执行的一段程序或一组程序。
2.操作系统经常会释放控制，而且必须依赖处理器才能恢复控制。
3.与其他计算机程序的区别在于**程序的意图**。
4.操作系统控制处理器使用其他系统资源，并控制其他程序的执行时机。但处理器要做任何一件这类事情时，都必须停止执行操作系统程序，而去执行其他程序。

操作系统的易拓展性：
1.硬件升级和新型硬件的出现
2.新的服务
3.纠正错误

## 操作系统的发展史

1.**串行处理**

顺序访问计算机

两个主要问题：调度，准备时间

2.**简单批处理系统**

中心思想：使用名为监控程序的软件

用户不再直接访问机器，相反，用户把卡片或磁带中的作业提交给**计算机操作员**，由操作员把这些作业按**顺序组织成批**，并将整个批作业放在输入设备上，供监控程序使用。每个程序完成处理后返回到监控程序，同时监控程序**自动加载下一个程序**。

其他硬件功能：内存保护，定时器，特权指令，中断

3.**多道批处理系统**

当一个作业需要等待I/O时，处理器**可以切换**到另一个可能并不在等待I/O的作业

4.**分时系统**

多个用户可以通过终端同时访问系统，由操作系统控制每个用户程序在**很短的时间内交替执行**。

## 主要成就

操作系统开发中4个重要理论进展：**进程**，**信息保护和安全**，**内存管理**，**调度和资源管理**。

**进程**

一个正在执行的程序

产生错误的主要原因：
1.不正确的同步：多个进程控制同一个信号致信号丢失或接收到重复信号
2.失败的互斥：多个用户或程序试图同时使用一个共享资源
3.不确定的程序操作：可能会因为重写相同的内存区域而发生不可预测的相互干扰
4.死锁：有两个或多个程序相互挂起等待

进程由3部分构成：
1.一段可执行程序
2.程序所需要的相关数据（变量，工作时间，缓存区）
3.程序执行的上下文（又称为进程状态）

**内存管理**

操作系统担负5项存储器管理职责：
1.进程隔离：必须保护独立的进程
2.自动分配和管理
3.支持模块化程序设计
4.保护和访问机制
5.长期存储

**信息保护和安全**

4类安全和保护问题：
1.可用性
2.保密性
3.数据完整性
4.认证

**调度和资源管理**

任何资源和调度策略都必须考虑3个因素：
1.公平性
2.有差别的相应性：需要区分具有不同服务要求的不同作业类别，做出满足所有要求的决策。
3.有效性

## 现代操作系统的特征

5类不同的设计方法和设计要素：
1.微内核体系结构
2.分布式操作系统
3.多线程
4.面向对象设计
5.对称多处理

进程process：一个或多个线程和相关系统资源（如包含数据和代码的存储器空间、打开的文件和设备）的集合。

线程thread：可分派的工作单元，包括处理器上下文环境（包含程序计数器和栈指针）和栈中自身的数据区域（目的是启用子程序分支）。

对称多处理的优势：性能，可用性，增量增长，可扩展性

## 容错性

容错性是指系统或部件在发生软/硬件错误时，**能够继续正常运行的能力**。

基本度量指标：**可靠性**，**平均失效时间**，**可用性**

**可靠性R(t)**
从时刻t=0开始系统正确运行，到时刻t时该系统正确运行的概率。

**平均失效时间MTTF**
![image-20230919172123943](C:\Users\CC507\AppData\Roaming\Typora\typora-user-images\image-20230919172123943.png)

**平均修复时间MTTR**

**可用性**
系统能够有效服务用户请求的时间段
![image-20230919172639317](C:\Users\CC507\AppData\Roaming\Typora\typora-user-images\image-20230919172639317.png)

**宕机时间**
系统不可用时间，反之为**正常运行时间**

# 第三章 进程描述和控制

## 什么是进程

由一组元素组成的实体，进程的两个基本元素是**程序代码**（program code, 可能被执行相同程序的其他进程共享）和与代码相关联的**数据集**（set of data）。

可以由以下元素表征：
标识符，状态，优先级，程序计数器，内存指针，上下文数据，I/O状态信息，记账信息。

**进程控制块**：上述信息存放的数据结构。

![image-20230927144622324](C:\Users\CC507\AppData\Roaming\Typora\typora-user-images\image-20230927144622324.png)

## 进程状态

轨迹(trace)：列出为进程执行的指令序列，可描述单个进程的行为。

分派器：使处理器切换进程。
