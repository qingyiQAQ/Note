# 第一章 绪论

## 数据库四个基本概念

1.数据：描述事物的符号记录。

数据的含义称为数据的语义。

2.数据库(Data Base，DB)：长期储存在计算机内、有组织的、可共享的大量数据的集合。

具有较小的冗余度、较高的数据独立性和易扩展性，并可为各种用户共享。

3.数据库管理系统(DataBase Management System, DBMS)：是计算机的基础软件。

功能：

(1)数据定义功能(Data Definition Language，DDL)

(2)数据组织、存储和管理

(3)数据操纵功能

(4)数据库的事务管理和运行管理

(5)数据库的建立和维护功能

(6)其他功能(包括数据库管理系统与网络中其他软件系统的通信功能)

![image-20230505192054042](C:\Users\CC507\AppData\Roaming\Typora\typora-user-images\image-20230505192054042.png)

## 数据管理技术的产生和发展

1.人工管理阶段：数据不保存，应用程序管理数据，数据不共享，数据不具有独立性。

2.文件系统阶段：数据可以长期保存，文件系统管理数据，数据共享性差，冗余度大，数据独立性差。

3.数据库系统阶段：共享性高，冗余度小，**具有高度物理独立性和一定逻辑独立性。**

## 数据库系统的特点

1.数据结构化：数据库系统实现**整体数据的结构化**，这是数据库的主要特征之一，也是数据库系统与文件系统的本质区别。

所谓“整体”结构化是指数据库中的数据不再仅仅针对某一个应用，而是面向整个组织或企业:不仅数据内部是结构化的，而且整体是结构化的，**数据之间是具有联系的。**

2.数据的共享性高、冗余度低且易扩充：数据不再面向某个应用而是面向整个系统。

数据共享可以大大减少数据冗余，节约存储空间。数据共享还能够避免数据之间的不相容性与不一致性。

3.数据独立性高：包括数据的物理独立性和逻辑独立性。

物理独立性：用户的应用程序与数据库中数据的物理存储是相互独立的。

逻辑独立性：用户的应用程序与数据库的逻辑结构是相互独立的。

4.数据由数据库管理系统统一管理和控制

数据库管理系统还必须提供以下几方面的数据控制功能：数据的安全性保护，数据的完整性检查，并发控制（多个用户一起使用），数据库恢复。

## 数据模型

数据模型（data model）：是一种模型，它是对现实世界数据特征的抽象。

数据模型是数据库系统的核心和基础。

两类数据模型：概念模型，逻辑模型和物理模型。

概念模型（conceptual model）：也称信息模型，它是按用户的观点来对数据和信息建模，主要用于数据库设计。

逻辑模型和物理模型：数据在系统内部的表示方式和存取方法，或在磁盘或磁带上的存储方式和存取方法。

## 概念模型

### 信息世界基本概念

1.实体：客观存在并可相互区别的事物称为实体。如：学生

2.属性：实体所具有的某一特性称为属性。如：学号，性别

3.码：唯一标识实体的属性。如：学号

4.实体型：用实体名及其属性名集合来抽象和刻画同类实体，称为实体型。如：学生（学号，姓名，性别，出生年月，所在院系，入些时间)

5.联系：可以在实体（型）与实体（型）之间，也可以是实体内部各属性的联系。

有一对一，一对多，多对多。

*概念模型的一种表示方法：实体-联系方法（E-R方法）*

## 数据模型的组成要素

由**数据结构**，**数据操作**和**数据完整性约束条件**组成。

1.数据结构：描述数据库组成对象以及对象之间的联系。

2.数据操作：对数据库中各种对象（型）的实例（值）允许执行的操作的集合，包括操作及有关的操作规则。

查询和更新（插入，删除，修改）

3.数据的完整性约束条件：数据的完整性约束条件是一组完整性规则。

## 常用的数据模型

**层次模型(hierarchical model)**

**网状模型( network model)**

关系模型(relational model)

面向对象数据模型(object oriented data model)

对象关系数据模型(object relational data model)

半结构化数据模型(semistructure data model）

## 层次模型

在数据库中定义满足下面两个条件的基本层次联系的集合为层次模型:

(1)有且只有一个结点没有双亲结点，这个结点称为根结点;
(2)根以外的其他结点有且只有一个双亲结点。

每个结点表示一个记录类型，记录类型之间的联系用结点之间的连线(有向边)表示，这种联系是父子之间的一对多的联系。

![image-20230505195438744](C:\Users\CC507\AppData\Roaming\Typora\typora-user-images\image-20230505195438744.png)

层次模型的优点主要有:
(1)层次模型的数据结构比较简单清晰。
(2)层次数据库的查询效率高。
(3)层次数据模型提供了良好的完整性支持。

层次模型的缺点主要有:
(1)现实世界中很多联系是非层次性的，如结点之间具有多对多联系，不适合用层次模型表示。
(2)如果一个结点具有多个双亲结点等，用层次模型表示这类联系就很笨拙，只能通过引入冗余数据（易产生不一致性）或创建非自然的数据结构（引入虚拟结点）来解决。对插入和删除操作的限制比较多，因此应用程序的编写比较复杂。
(3)查询子女结点必须通过双亲结点。
(4)由于结构严密，层次命令趋于程序化。

## 网状模型

在数据库中，把满足以下两个条件的基本层次联系集合称为网状模型:

(1)允许一个以上的结点无双亲。
(2)一个结点可以有多于一个的双亲。

![image-20230505195656294](C:\Users\CC507\AppData\Roaming\Typora\typora-user-images\image-20230505195656294.png)

网状模型的优点主要有:
(1)能够更为直接地描述现实世界，如一个结点可以有多个双亲，结点之间可以有多种联系。
(2)具有良好的性能,存取效率较高。

网状模型的缺点主要有:
(1)结构比较复杂，而且随着应用环境的扩大，数据库的结构就变得越来越复杂，不利于最终用户掌握。
(2)网状模型的 DDL、DML复杂，并且要嵌入某一种高级语言（如COBOL、C)中。用户不容易掌握,不容易使用。
(3)由于记录之间的联系是通过存取路径实现的，应用程序在访问数据时必须选择适当的存取路径，因此用户必须了解系统结构的细节，加重了编写应用程序的负担。

## 关系模型

关系(relation)：一个关系对应通常说的一张表。

元组(tuple)：表中的一行即为一个元组。

属性(attribute)：表中的一列即为一个属性

码(key)：也称为码键。表中的某个属性组，它可以唯一确定一个元组。

域(domain)：域是一组具有相同数据类型的值的集合。(取值范围)

分量：元组中的一个属性值。

关系模式：对关系的描述，一般表示为
关系名(属性1，属性2，…，属性n)

关系模型具有下列优点:
(1)关系模型与格式化模型不同，它是建立在严格的数学概念的基础上的。
(2)关系模型的概念单一。无论实体还是实体之间的联系都用关系来表示。对数据的检索和更新结果也是关系（即表)。所以其数据结构简单、清晰，用户易懂易用。
(3)关系模型的存取路径对用户透明，从而具有更高的数据独立性、更好的安全保密性，也简化了程序员的工作和数据库开发建立的工作。

关系模型也有缺点例如：由于存取路径对用户是隐蔽的，查询效率往往不如格式化数据模型。

## 数据库系统模式的概念

型：如：学生（学号，姓名）

值：如：（201315130，张三）

模式(schema)：数据库中全体数据的逻辑结构和特征的描述，它仅仅涉及型的描述，不涉及具体的值。

## 数据库系统的三级模式结构

![image-20230505200412710](C:\Users\CC507\AppData\Roaming\Typora\typora-user-images\image-20230505200412710.png)

1.模式(schema)：模式也称逻辑模式，是数据库中全体数据的逻辑结构和特征的描述，是所有用户的公共数据视图。

2.外模式(external schema)
外模式也称子模式(subschema)或用户模式，它是数据库用户(包括应用程序员和最终用户)能够看见和使用的**局部数据的逻辑结构和特征的描述**，是数据库用户的数据视图,是与某一应用有关的数据的逻辑表示。

3.内模式(internal schema)
内模式也称存储模式(storage schema)，一个数据库只有一个内模式。它是数据物理结构和存储方式的描述，是数据在数据库内部的组织方式。

## 数据库系统的组成

硬件平台寄数据库

软件

人员

数据库管理员：决定数据库中的信息内容和结构，决定数据库的存储结构和存取策略，定义数据的安全性要求和完整性约束条件，监控数据库的使用和运行，数据库的改进和重组、重构。

系统分析员和数据库设计人员

应用程序员

用户

# 第二章 关系数据库

## 关系

**域**：取值范围

一个域允许的不同取值个数称为这个域的基数（cardinal number)。

**笛卡尔积**：

![image-20230505201304059](C:\Users\CC507\AppData\Roaming\Typora\typora-user-images\image-20230505201304059.png)

**关系**：笛卡尔积的子集

关系数据语言：关系代数，关系演算（元组关系演算，域关系演算）

## 关系完整性

实体完整性规则：若属性(指一个或一组属性)A是基本关系R的主属性，则A不能取空值(null value)。

设F是基本关系R的一个或一组属性，但不是关系R的码，K是基本关系S的主码。如果F与K,相对应，则称F是R的外码(foreign key)，并称基本关系R为**参照关系**（referencing relation)，基本关系S为被参照关系（referenced relation）或目标关系( target relation)。关系R和S不一定是不同的关系。

参照完整性规则：若属性(或属性组)F是基本关系R的外码，它与基本关系S的主码K,相对应(基本关系R和S不一定是不同的关系)，则对于R中每个元组在F上的值必须:
**或者取空值**(F的每个属性值均为空值);·**或者等于S中某个元组的主码值**。

## 关系代数

![image-20230505204235426](C:\Users\CC507\AppData\Roaming\Typora\typora-user-images\image-20230505204235426.png)

**元组的连接**

![image-20230505204451788](C:\Users\CC507\AppData\Roaming\Typora\typora-user-images\image-20230505204451788.png)

**象集**

![image-20230505204621819](C:\Users\CC507\Desktop\笔记\image-20230505204621819.png)

在列Z中选出列X值为x对应的值，结果为Z的某些值

**选择**

![image-20230505204753743](C:\Users\CC507\AppData\Roaming\Typora\typora-user-images\image-20230505204753743.png)

F为逻辑表达式

R表中满足F的所有行

**投影**

![image-20230505204947204](C:\Users\CC507\AppData\Roaming\Typora\typora-user-images\image-20230505204947204.png)

A为一个或多个列

最终结果为表

**连接**

![image-20230505205104249](C:\Users\CC507\AppData\Roaming\Typora\typora-user-images\image-20230505205104249.png)

从两个关系的笛卡尔积中选择满足A与B关系的行

**外连接**

![image-20230505205551177](C:\Users\CC507\AppData\Roaming\Typora\typora-user-images\image-20230505205551177.png)

不满足关系也写入，其他填入空值

**左外连接**

![image-20230505205642859](C:\Users\CC507\AppData\Roaming\Typora\typora-user-images\image-20230505205642859.png)

左侧的R中所有行都必须出现，右侧没有值则填空值

右外连接类似

**除**

![image-20230505210014711](C:\Users\CC507\AppData\Roaming\Typora\typora-user-images\image-20230505210014711.png)

R与S必须有一个以上相同域的列

![image-20230505210437722](C:\Users\CC507\AppData\Roaming\Typora\typora-user-images\image-20230505210437722.png)



# 第三章 关系数据库标准语言SQL

## SQL特点

1.综合统一

2.高度非过程化

3.面向集合的操作方式

4.以同一种语法提供多种使用方式

5.语言简洁，易学易用

## 数据定义

**模式定义：**

create schema 模式名 authorization 用户名;

可以去掉分号继续跟创建表的语句

**模式删除：**

drop schema cascade/restrict;

cascade级联：会删除这个模式下的所有表

restrict限制：该模式下创建了表就删不掉

**表定义：**

create table 表名

(列名1 数据类型1 限制条件1,

列名2 数据类型2 限制条件2,

...

primary key (列1,列2,...),

foreign key (列名) references 外表名(列名),

foreign key ...);

限制条件可以是：

not null

unique

check 条件

![image-20230505211735367](C:\Users\CC507\AppData\Roaming\Typora\typora-user-images\image-20230505211735367.png)

![image-20230505211744970](C:\Users\CC507\AppData\Roaming\Typora\typora-user-images\image-20230505211744970.png)

**修改表：**

alter table 表名 add column 列名 数据类型 约束;			增加列

alter table 表名 drop column 列名 cascade/restrict;		删除列

alter table 表名 alter column 列名 数据类型;			修改列

alter table 表名 add constraint 主键名 primary key(列名);		增加主键

alter table 表名 add constraint 外键名 foreign key(列名) references 外表名(列名);		增加外键

alter table 表名 drop constraint 完整性约束名 cascade/restrict;		删除完整性约束

**建立索引：**

create unique/cluster/不写 index 索引名

on 表名(列名1 asc/desc,列名2 asc/desc,...);

**修改索引：**

alter index 旧索引名 rename to 新索引名;

**删除索引：**

drop index 索引名;

## 数据查询

### 单表查询

select all/distinct/不写当做all 列名1 列别名,列名2,列名3,...

form 表名1 as 别名1,表名2 as 别名2

where 条件表达式

group by 列名 having 条件表达式

order by 列名 asc/desc

limit 限制条数;

![image-20230505214052570](C:\Users\CC507\AppData\Roaming\Typora\typora-user-images\image-20230505214052570.png)

in/not in后面跟一个集合，如：(1,2,3)

like/not like后面加一个匹配串，由单引号括起来

%代表任意长度字符

_代表一个字符

exists后加一个子查询，返回子查询中是否有数据

escape'字符'，让前面的匹配字符串中紧跟在该字符后的字符不再具有通配符含义

**聚集函数**

![image-20230505214539564](C:\Users\CC507\AppData\Roaming\Typora\typora-user-images\image-20230505214539564.png)

通过group by分组后聚集函数将作用于每一个组

where 子句中不能出现聚集函数

**子查询**

![image-20230505220001124](C:\Users\CC507\AppData\Roaming\Typora\typora-user-images\image-20230505220001124.png)

## 数据更新

**插入数据：**

insert into 表名 (列名1,列名2,...)

values (常量1,常量2,...),(常量1,常量2,...),...;

**修改数据：**

update 表名 set 列名1=常量1,列名2=常量2,...

where 条件;

**删除数据：**

delete from 表名

where 条件;

**建立视图：**

create view 视图名 列名1,列名2,列名3,....

as 子查询

with check option;

如果有with check option，以后对该视图进行插入，修改，删除条件时会自动加上创建时其子查询的条件

**删除视图：**

drop view 视图名 cascade/不写;

cascade会把由他导出的视图一起删掉

# 第四章 数据库安全性

## 数据库安全性概述

对数据库安全性产生威胁的主要因素：

1.非授权用户对数据库的恶意存取和破坏

2.数据库中重要或敏感的数据被泄露

3.安全环境的脆弱性

## 数据库的安全性控制

**权限的授予与收回：**

grant 权限1(列名),权限2,...

on 对象类型1 对象名1,对象类型2 对象名2,...

to 用户1,用户2,...

with grant option,

when user()=name to all;

权限为查询select，修改alter，删除drop，all privileges所有权限

对象类型为表table，视图view，索引index

用户可以写public代表所有用户

with grant option可以使该用户可以把该权限授予别人（不允许循环授权）

when user()=name to all只对自己的记录授予某种权限

grant改为revoke即授予变为收回

**创建用户：**

create user 用户名 with password "密码";

**创建角色：**

create role 角色名;

**将一个角色授予其他角色或用户：**

grant 角色1,角色2,...

to 角色/用户,...

with admin option;

该角色/用户的权限为授予他的所有角色的总和

with admin option可以让他把这个权限再给别人

grant改为revoke收回

**审计：**

审计功能把用户对数据库的所有操作自动记录下来放入审计日志中。审计员可以利用审计日志监控数据库中的各种行为。

audit 操作名1,操作名2

on 表名;

操作名即select，update，delete等

改为noaudit取消审计

# 第五章 数据库完整性

包括：实体完整性，参照完整性，用户定义完整性

## 列级约束

primary key

not null

unique

unique not null

check(条件表达式)

constraint 约束名 check(条件表达式)

## 表级约束

constraint 主键名 primary key(列名)

constraint 外键名 foreign key(列名) references 外表名(列名)

## 断言

**创建断言：**

create assertion 断言名 check(条件);

**删除断言：**

drop assertion 断言名;

## 触发器

**创建触发器：**

create trigger 触发器名

before/after 触发事件 on 表名

referencing new/old row as 变量

for each row/statement

when 触发条件 触发动作体;

触发事件：

insert/update/delete

insert or delete

update of 列名1,列名2,...

row为行级触发器，对被触发的每一行执行一次操作

statement为语句级触发器，每执行一次触发该触发器的语句执行一次操作

# 第六章 关系数据库理论

## 概念

关系模式（五元组）

R(U,D,DOM,F)

R是符号化的元组语义，U是一组属性，D是属性组U的域，DOM是属性到域的映射，F是属性组U上的一组数据依赖

数据依赖：属性与属性的互相约束。最重要的是：函数依赖，多值依赖

**第一范式**

关系满足每一个分量必须是不可分的数据项，则为第一范式简写为![image-20230623151026879](C:\Users\CC507\AppData\Roaming\Typora\typora-user-images\image-20230623151026879.png)。

**数据依赖**

数据依赖是一个关系内部属性与属性之间的一种约束关系

**函数依赖**：属性X函数确定Y，或者属性Y函数依赖X。Y是X的函数。

**多值依赖**：如果一个关系模式 R 中的属性集合 X 决定了属性集合 Y 的全部取值，并且在 R 中存在另一个属性集合 Z，Z 与 X 相互独立，同时 Z 与 Y 也相互独立，那么就可以称作 X 多值决定 Y，即 X ->> Y。这表示在给定 X 的情况下，Y 的取值可以有多个不重复的组合。

## 规范化

**函数依赖**：
![image-20230623152439577](C:\Users\CC507\AppData\Roaming\Typora\typora-user-images\image-20230623152439577.png)
![image-20230623152501699](C:\Users\CC507\AppData\Roaming\Typora\typora-user-images\image-20230623152501699.png)

**码(key)**：也称键或键码。
![image-20230623154527940](C:\Users\CC507\AppData\Roaming\Typora\typora-user-images\image-20230623154527940.png)
如果是部分依赖则称为**超码**，候选码是最小的超码，即K的任意一个真子集都不是候选码。
若候选码多于一个则选定其中一个为**主码**。
包含在任何一个候选码中的属性称为**主属性**，反之为**非主属性**(非码属性)。
如果整个属性组都是码则称为**全码**。
关系属性组X不是R的码但是是另外一个关系的码，称为**外码**。

## 范式

各种范式的关系：
![image-20230623155641361](C:\Users\CC507\AppData\Roaming\Typora\typora-user-images\image-20230623155641361.png)

**2NF**

![image-20230623155703204](C:\Users\CC507\AppData\Roaming\Typora\typora-user-images\image-20230623155703204.png)

实例：
![image-20230623160033306](C:\Users\CC507\AppData\Roaming\Typora\typora-user-images\image-20230623160033306.png)
码为(Sno,Cno)。Sdept,Sloc并不完全依赖于码，因此不是2NF。

不属于2NF会产生的问题：插入异常，删除异常，修改复杂

**3NF**

![image-20230623195120384](C:\Users\CC507\AppData\Roaming\Typora\typora-user-images\image-20230623195120384.png)

简单定义第三范式（3NF）如下：

1.关系模式必须满足第二范式（2NF）；
2.非主属性必须直接依赖于候选键（而不是依赖于其他非主属性）。

存在的问题与2NF一样

**BCNF**

修正的第三范式

![image-20230623200142766](C:\Users\CC507\AppData\Roaming\Typora\typora-user-images\image-20230623200142766.png)

所有决定因素(箭头左边的那个)都必须包含码

消除了插入异常和删除异常

## 多值依赖

![image-20230623213002675](C:\Users\CC507\AppData\Roaming\Typora\typora-user-images\image-20230623213002675.png)

如果Z为空，则称为**平凡的多值依赖**。

多值依赖具有**对称性**，即X->->Y，则X->->Z。
多值依赖具有**传递性**，即X->->Y，则Y->->Z，X->->Z-Y。
函数依赖为**多值依赖**的特殊情况。

多值依赖的有效范围
![image-20230623215331003](C:\Users\CC507\AppData\Roaming\Typora\typora-user-images\image-20230623215331003.png)
![image-20230623220029779](C:\Users\CC507\AppData\Roaming\Typora\typora-user-images\image-20230623220029779.png)

**4NF**

![image-20230623222540216](C:\Users\CC507\AppData\Roaming\Typora\typora-user-images\image-20230623222540216.png)

# 第七章 数据库设计

数据库设计是指对于一个给定的应用环境，构造（设计）优化的**数据库逻辑模式**和**物理结构**，并据此建立数据库及其应用系统，使之能够有效地存储和管理数据，满足各种用户的应用需求，包括**信息管理要求**和**数据操作要求**。

## 数据库设计的特点

1.数据库建设基本规律：三分技术，七分管理，十二分基础数据
2.结构（数据）设计和行为（处理）设计相结合

## 数据库设计方法

需要的知识技术：

计算机的基础知识;
软件工程的原理和方法;
程序设计的方法和技巧;
数据库的基本知识;
数据库设计技术;
应用领域的知识。

## 数据库设计都基本步骤

6个阶段：

需求分析;
概念结构设计;
逻辑结构设计;
物理结构设计;
数据库实施;
数据库运行和维护。

![image-20230624135658394](C:\Users\CC507\AppData\Roaming\Typora\typora-user-images\image-20230624135658394.png)

## 需求分析

**需求分析的任务**：
1.详细调查现实世界要处理的对象（组织、部门、企业等）。
2.充分了解原系统（手工系统或计算机系统）工作概况。
3.明确用户的各种需求。
4.在此基础上确定新系统的功能。新系统必须充分考虑今后可能的扩充和改变。
5.调查的重点是“数据”和“处理”，通过调查、收集与分析，获得用户对数据库的如下要求：**信息要求，处理要求，安全性与完整性要求**。

**需求分析的方法**：

1.调查用户的实际要求
2.与用户达成共识
3.分析与表达这些需求

调查用户实际需求：
调查组织机构情况
调查各部门的业务活动情况明确新系统的各项要求：信息要求、处理要求、安全性与完整性要求(调查重点)
确定新系统边界：哪些由计算机完成，哪些由人工完成

调查方法：
1.跟班作业
2.开调查会
3.请专人介绍
4.询问
5.设计调查表请用户填写
6.查阅记录

## 数据字典

数据字典是进行详细的数据收集和数据分析所获得的主要成果。它是**关于数据库中数据的描述**，即**元数据**，而不是数据本身。数据字典是在需求分析阶段建立，在数据库设计过程中不断修改、充实、完善的。它在数据库设计中占有很重要的地位。

数据字典的内容：
1.数据项(data item)
2.数据结构
3.数据流
4.数据存储
5.处理过程

![image-20230624193203529](C:\Users\CC507\AppData\Roaming\Typora\typora-user-images\image-20230624193203529.png)
![image-20230624193217151](C:\Users\CC507\AppData\Roaming\Typora\typora-user-images\image-20230624193217151.png)
![image-20230624193232663](C:\Users\CC507\AppData\Roaming\Typora\typora-user-images\image-20230624193232663.png)
![image-20230624193341285](C:\Users\CC507\AppData\Roaming\Typora\typora-user-images\image-20230624193341285.png)
![image-20230624193507100](C:\Users\CC507\AppData\Roaming\Typora\typora-user-images\image-20230624193507100.png)

## 概念结构设计

概念模型特点：
1.能真实、充分地反映现实世界，是现实世界的一个真实模型；
2.易于理解，从而可以用它和不熟悉计算机的用户交换意见；
3.易于更改，当应用环境和应用要求改变时，容易对概念模型修改和扩充；
4.易于向关系、网状、层次等各种数据模型转换。

描述工具：E-R模型

**实体之间的联系**

参与联系的实体型的数目称为**联系的度**
单元联系；二元联系；三元联系；N元联系

两个实体型：

![image-20230624194031779](C:\Users\CC507\AppData\Roaming\Typora\typora-user-images\image-20230624194031779.png)

多个实体型：

![image-20230624194154942](C:\Users\CC507\AppData\Roaming\Typora\typora-user-images\image-20230624194154942.png)

单个实体型内的联系：

![image-20230624194218328](C:\Users\CC507\AppData\Roaming\Typora\typora-user-images\image-20230624194218328.png)

**E-R图**

1.实体型用矩形表示
2.属性用椭圆形表示
3.联系用菱形表示

实体与属性的划分规则：
作为属性，不能再具有需要描述的性质。
属性不能与其他实体具有联系。

**E-R图的集成**

1.合并E-R图，生成初步E-R图

各子系统的E-R图之间存在三种冲突：属性冲突，命名冲突，结构冲突。

2.消除不必要的冗余，设计基本E-R图

# 第九章 关系查询处理和查询优化

**查询处理步骤**：查询分析，查询检查，查询优化（代数优化，物理优化），查询执行。

**选择操作**的实现算法：
全表扫描算法
索引扫描算法

**连接操作**的实现算法：
嵌套循环算法
排序-合并算法
索引连接算法
Hash-join算法

## 查询优化

**代数优化**：
1.选择运算应尽可能先做
2.把投影运算和选择运算同时进行
3.把投影同其前或其后的双目运算结合起来，没有必要为了去掉某些字段而扫描一遍关系。
4.把某些选择同在它前面要执行的笛卡尔积结合起来成为一个连接运算，连接特别是等值连接运算要比同样关系上的笛卡尔积省很多时间。
5.找出公共子表达式。

![image-20230624214057838](C:\Users\CC507\AppData\Roaming\Typora\typora-user-images\image-20230624214057838.png)



